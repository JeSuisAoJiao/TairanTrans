#如何用Unity 2D制作一个像疯狂喷气机的游戏——第三部分

这是关于如何用Unity 2D制作一个像疯狂喷气机的游戏的系列教程的最后一个部分。如果你落下了教程之前的部分，你最好先去完成之前教程的学习。它们分别是：第一部分和第二部分。

就像我在上个部分的结尾提到的那样，这个部分我们将享尽所有的乐趣。这将是走到这里的奖励。:)

在这个部分你将添加激光，硬币，音效，音乐甚至是视差滚动。好了，聊了够多了，让我们开始享受乐趣吧！

##开始

你可以继续使用你在第二部分创建的工程或者你也可以下载这个部分的初始工程。它们几乎是相同的。

如果你想要下载初始工程，请使用这个链接：[RocketMouse_Final_Part2](http://cdn4.raywenderlich.com/wp-content/uploads/2014/03/RocketMouse_Final_Part2.zip)

当你已经准备好打开**RocketMouse.unity**场景，就让我们开始吧！

##添加激光

老鼠飞过房间是很棒的，但是这个游戏的挑战在哪里呢？是时候添加一些障碍物了，还有什么比激光更酷的呢？:)

激光将被随机生成，以一个与生成房间的相同方式，所以你需要创建一个活动房屋。你还需要创建一个小脚本来控制激光。

##创建激光

这里是创建一个激光对象所需的步骤：

1.在**Project**视图找到**laser_on**精灵并且拖动它到这个场景。

注意:由于激光活动房屋将仅由激光它自己组成，你不需要将它放在原点或者类似于原点的其它地方。

2.在**Hierarchy**中选中它并且将它重命名为**laser**。

3.设置它的**Sorting Layer**为**Objects**。

4.添加**Box Collider 2D**要素。

5.将**Box Collider 2D**要素的**Is Trigger**属性设为可用的。

注意：

当Is Trigger属性是可用的，碰撞机将触发碰撞事件，但会被物理引擎忽视。换句话说，如果老鼠触碰到激光你将会被通知到。然而，激光不能阻止老鼠的移动。

这是非常方便的，这里可以给出很多理由。举个例子，如果老鼠在激光的顶部挂了，它将躺在激光上悬挂在空中。或者那老鼠也可以在触碰到激光后因为惯性再向前移动一小段距离，而不是从激光那里反弹回去。

除此之外，真的激光不是一些难的对象，所以通过将这个属性设置为可用的，你只是模仿真的激光。

6.设置碰撞机的**尺寸**，**X**设为**0.18**，**Y**设为**3.1**。

注意：这里创建了一个碰撞机仅当激光存在的时候，留下两端的发射器是完全安全的。

7.创建一个新的**C# 脚本**命名为**LaserScript**，并且将它附加到**laser**。

这里是完整的步骤清单的演示：

![img](http://cdn5.raywenderlich.com/wp-content/uploads/2014/03/rocket_mouse_unity_p3_40-552x500.png "rocket_mouse_unity_p3_40")

##通过脚本控制激光的开关

在**MonoDevelop**上打开**LaserScript**并且加上以下实例变量：

```
//1
public Sprite laserOnSprite;    
public Sprite laserOffSprite;
 
//2    
public float interval = 0.5f;    
public float rotationSpeed = 0.0f;
 
//3
private bool isLaserOn = true;    
private float timeUntilNextToggle;
```

这可能看起来有很多变量，但是实际上每个变量都是相当不重要的。

1.激光将可能是两个状态：**On**和**Off**。每个状态都有单独的图片。你可以仅在一瞬间就能详细说出每张状态图。

2.这些属性允许你加上一些随机的波动。你可以设置不同的**interval*的激光在这个层面上不能运作。通过设置一个低的**interval**，你可以创建一个可以很快开关的激光，而通过设置一个高的**interval**你可以创建一个激光在它的状态持续很久，而且谁知道呢，也许那老鼠甚至可以在它关闭时候飞越激光。

变量**rotationSpeed**提供相同的目的。它详细说明了激光旋转的速度。

3.最后有两个私有变量用来切换激光状态。

这里是激光的一个例子。每个激光都有一个不同的**interval**和**rotationSpeed**。

![img](http://cdn5.raywenderlich.com/wp-content/uploads/2014/03/rocket_mouse_unity_p3_41.gif "rocket_mouse_unity_p3_41")





